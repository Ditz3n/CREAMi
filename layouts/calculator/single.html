{{ define "main" }}

<article class="post-single">
    <header class="post-header">
        <h1 class="post-title">{{ .Title }}</h1>
    </header>

     <div class="post-content">
        {{ .Content }}
    </div>

    <div class="calculator-container">

        <!-- Autocomplete for ingrediens søgning -->
        <div id="autocomplete-list" class="autocomplete-items"></div>

        <!-- Container størrelse valg -->
        <h3>Størrelse</h3>
        <div class="container-size-toggle">
            <label class="toggle-label">
                <input type="radio" name="container-size" value="regular">
                <span class="toggle-option">Ninja CREAMi Pint (473ml)</span>
            </label>
            <label class="toggle-label">
                <input type="radio" name="container-size" value="deluxe">
                <span class="toggle-option">Ninja CREAMi Deluxe (710ml)</span>
            </label>
        </div>

        <div class="calculator-sections disabled">
            <!-- Opskriftsnavn felt -->
            <h3>Opskriftsnavn</h3>
            <p class="section-description">Navnet på din opskrift. Størrelsen (Deluxe el. Regular) tilføjes automatisk ved download.</p>
            <div class="recipe-name-wrapper">
                <input type="text" id="recipe-name-input" placeholder="F.eks. Dobbelt Chokolade Protein-is">
            </div>

            <!-- Beskrivelse felt -->
            <h3>Beskrivelse</h3>
            <p class="section-description">En kort, fængende beskrivelse af din opskrift, der vises øverst på siden.</p>
            <div class="recipe-description-wrapper">
                <textarea id="recipe-description-input" placeholder="F.eks. En rig og cremet chokoladeis, spækket med protein og en intens kakaosmag..."></textarea>
            </div>

            <h3>Ingredienser (Is-base)</h3>
            <p class="section-description">Ingredienser tilføjet her påvirker både næringsindhold og de tekniske værdier (FPDF & MSNF).</p>
            <div class="volume-counter">
                <span>Total volumen: </span>
                <span id="total-volume" class="volume-value">0ml</span>
                <span class="volume-limit"> / <span id="max-volume">473ml</span></span>
            </div>
            
            <div class="table-wrapper">
                <table id="ingredients-table">
                    <thead>
                        <tr>
                            <th>Ingrediens</th>
                            <th>Mængde (g)</th>
                        </tr>
                    </thead>
                    <tbody id="ingredients-tbody">
                        <!-- Rækker tilføjes af JavaScript -->
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="2" class="button-cell">
                                <button id="add-row-btn">+ Tilføj ingrediens</button>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <h3 class="mixins-header">Mix-Ins</h3>
            <p class="section-description">Ingredienser tilføjet her påvirker kun det samlede næringsindhold, ikke de tekniske værdier.</p>
            
            <div class="button-container" id="show-mixins-container">
                <button id="show-mixins-btn">+ Tilføj Mix-Ins</button>
            </div>

            <div class="table-wrapper" id="mixins-table-wrapper" style="display: none;">
                <table id="mixins-table">
                    <thead>
                        <tr>
                            <th>Mix-In</th>
                            <th>Mængde (g)</th>
                        </tr>
                    </thead>
                    <tbody id="mixins-tbody">
                        <!-- Rækker tilføjes af JavaScript -->
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="2" class="button-cell">
                                <button id="add-mixin-btn">+ Tilføj Mix-In</button>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <hr>

            <h3>Næringsindhold</h3>
            
            <h4>Per Total Opskrift</h4>
            <div class="table-wrapper">
                <table id="results-table">
                    <thead>
                        <tr>
                            <th>Næringsemne</th>
                            <th>Værdi</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Energi</td><td id="total-kcal">0.0</td></tr>
                        <tr><td>Fedt</td><td id="total-fat">0.0g</td></tr>
                        <tr><td>Kulhydrater</td><td id="total-carbs">0.0g</td></tr>
                        <tr><td>Sukker</td><td id="total-sugar">0.0g</td></tr>
                        <tr><td>Protein</td><td id="total-protein">0.0g</td></tr>
                        <tr><td>Salt</td><td id="total-salt">0.0g</td></tr>
                    </tbody>
                </table>
            </div>

            <h4>Per 100g/ml</h4>
            <div class="table-wrapper">
                <table id="per100-table">
                    <thead>
                        <tr>
                            <th>Næringsemne</th>
                            <th>Værdi</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Energi</td><td id="per100-kcal">0.0 kcal</td></tr>
                        <tr><td>Fedt</td><td id="per100-fat">0.0g</td></tr>
                        <tr><td>Kulhydrater</td><td id="per100-carbs">0.0g</td></tr>
                        <tr><td>Sukker</td><td id="per100-sugar">0.0g</td></tr>
                        <tr><td>Protein</td><td id="per100-protein">0.0g</td></tr>
                        <tr><td>Salt</td><td id="per100-salt">0.0g</td></tr>
                    </tbody>
                </table>
            </div>

            <h4>Tekniske Værdier (Kun Is-base)</h4>
            <div class="table-wrapper">
                <table id="technical-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Værdi</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td><b>FPDF</b></td><td id="total-fpdf"><b>0.0</b></td></tr>
                        <tr><td><b>MSNF %</b></td><td id="total-msnf-perc"><b>0.0%</b></td></tr>
                    </tbody>
                </table>
            </div>
            
            <hr>

            <!-- Fremgangsmåde -->
            <h3>Fremgangsmåde</h3>
            <p class="section-description">Skriv hvert trin på en ny linje. De bliver automatisk omdannet til en nummereret liste.</p>
            <textarea id="instructions-box" placeholder="F.eks. Blend alle ingredienser til is-basen i en blender i 60 sekunder."></textarea>

            <!-- Noter -->
            <h3>Noter</h3>
            <p class="section-description">Tilføj eventuelle tips, tricks eller variationer her. Hver linje bliver til et punkt.</p>
            <textarea id="notes-box" placeholder="F.eks. For en endnu mere intens smag, lad basen modne i køleskabet i 4-6 timer før frysning."></textarea>

            <!-- Download knap -->
            <div class="button-container">
                <button id="download-btn">Download Opskrift (.md)</button>
            </div>
        </div>

    </div>

    <script>
        const siteBaseURL = "{{ .Site.BaseURL }}";
    </script>
    <script src="{{ .Site.BaseURL }}js/calculator.js"></script>

    <div class="post-last-modified">
        <p>Sidst ændret: {{ .Lastmod.Format "January 2, 2006" }}</p>
    </div>
</article>

{{ end }}